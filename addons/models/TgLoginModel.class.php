<?php/** * 天宫人员登录模型 * * @author nonant */class TgLoginModel extends Model {    protected $tableName = 'tg_login';    public function getTgLoginDb($day){        $map['day'] = $day;        $money = $this->where($map)->field('uid')->findAll();        if(!$money){            return array();        }        return getSubByKey($money, 'uid');    }    public function getTgLoginCache($day){        $cache = S('S_tglogin_'.$day);        if(!is_array($cache)) {            $cache = $this->getTgLoginDb($day);            if($day!=date('Y-m-d')){                S('S_tglogin_'.$day, $cache);            }        }        return $cache;    }}